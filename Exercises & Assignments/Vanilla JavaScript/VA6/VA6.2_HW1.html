<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>replit</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
  <style>
    #loading{
      display: none
    }
    #success{
      display:none;
      color:green;
    }
  </style>
</head>

<body class="container py-4">
 <h1>Add Movie</h1>

  <div class="container">
    <form id="addMovie"><br>
      <label for="title">Title: </label><br>
      <input id="title" class="form-control"/> <br>

      <label for="releaseYear"> Release Year:</label> <br>
      <input id="releaseYear" class="form-control"/> <br>

      <div>
        <label for="genreFilter"> Genre: </label>
        <select id="genreFilter" class="form-control">

          <option value= "Action"> Action </option> 
          <option value= "Drama"> Drama </option>
           <option value="comedy"> Comedy</option>
          <option value="romance"> Romance </option>

          <option value= "thriller"> Thriller </option>
          <option value= "Fantasy"> Fantasy </option>
           <option value="sci-fi"> Sci-fi</option>
          <option value="horror"> Horror </option>

          <option value= "sports"> Sports </option>
          <option value= "Drama"> Drama </option>
           <option value="musical"> Musical</option>
          <option value="other"> Other</option>

        </select> <br>
      </div>

      <label for="director"> Director:</label> <br>
      <input id="director" class="form-control"/> <br>

      <label for="actors"> Actors:</label><br>
      <input id="actors" class="form-control" /> <br>
      
      <label for="language"> Language:</label> <br>
      <input id="language" class="form-control"/> <br>

      <label for="country"> Country: </label>
      <select id="country" class="form-control"> 
        <option value= "India"> India </option> 
        <option value= "USA"> USA</option>
        <option value="UK"> UK </option>
      </select> <br>

      <label for="rating"> Rating:</label> <br>
      <input id="rating" class="form-control" type="number"/> <br>

      <label for="plot"> Plot:</label> <br>
      <textarea id="plot" class="form-control"> </textarea><br>

      <label for="awards"> Awards:</label> <br>
      <input id="awards" class="form-control"/> <br>  


      <label for="posterURL"> Poster URL:</label> <br>
      <input id="posterURL" class="form-control"/> <br>

      <label for="trailerURL"> Trailer URL:</label> <br>
      <input id="trailerURL" class="form-control"/> <br>  

      <button type="submit" class="btn btn-primary"> Add Movie</button><br><br>
    </form>
 

    <div id="loading"> Sending Data...</div>
    <div id="success"> Movie added Successfully</div>
  </div>
  <script>
   
    const addMovie = document.querySelector("#addMovie")
    const title = document.querySelector("#title")
    const releaseYear = document.querySelector("#releaseYear");
    const genre = document.querySelector("#genreFilter");
    const director = document.querySelector("#director");
    const language = document.querySelector("#language");
    const rating = document.querySelector("#rating");
    const country = document.querySelector("#country");
    const plot = document.querySelector("#plot");
    const awards = document.querySelector("#awards");
    const posterURL = document.querySelector("#posterURL");
    const trailerURL = document.querySelector("#trailerURL");
    const loadingContainer = document.querySelector("#loading");
    const successContainer = document.querySelector("#success");
    const apiUrl = 'https://va-5-assignment-express-student-neog.replit.app/movies'

    addMovie.addEventListener("submit", function(event){
      event.preventDefault()
      loadingContainer.style.display = "block"

      const movieData = {
        title: title.value,
        releaseYear: releaseYear.value,
        genre: genre.value,
        director: director.value,
        actors: actors.value,
        language: language.value,
        rating: rating.value,
        country: country.value,
        plot: plot.value,
        awards: awards.value,
        posterURL: posterURL.value,
        trailerURL: trailerURL.value,
        
      } 
        fetch(apiUrl, {
          method: "POST",
          body: JSON.stringify(movieData),
          headers: {
            'content-type':'application/json'
          }
        })
      .then(function(response){
        return response.json()
      })
      .then(function(data){
        if(data){
          loadingContainer.style.display = "none"
          successContainer.style.display = "block"
        }
      })
    })
  </script>
</body>

</html>

